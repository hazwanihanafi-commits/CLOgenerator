<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SCLOG — Smart Course Learning Outcome Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap + icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
/* ============================================================
   SOFT USM PURPLE THEME — Light + Dark + Mobile-Optimized
   Title: SCLOG — Smart Course Learning Outcome Generator
   ===========================================================*/

/* ---------- ROOT COLORS ---------- */
:root{
  --usm-purple: #6d28d9;
  --usm-purple-light: #a78bfa;
  --usm-bg: #f6f3ff;
  --card-bg: #ffffff;
  --muted: #6c6480;
  --text-dark: #2d244f;
  --radius: 14px;
  --shadow: 0 10px 30px rgba(16,24,40,0.06);
  --border: rgba(109,40,217,0.18);
}

/* ---------- LIGHT MODE ---------- */
body[data-theme="light"]{
  background: var(--usm-bg);
  color: var(--text-dark);
}

/* ---------- DARK MODE (soft purple) ---------- */
body[data-theme="dark"]{
  background: linear-gradient(180deg,#0f0b18,#1b1430);
  color: #eee6ff;
}

/* ---------- LAYOUT SHELL ---------- */
.app-shell {
  display:flex;
  gap:20px;
  padding:18px;
  max-width:1400px;
  margin: 8px auto;
  align-items:flex-start;
}

/* Header container (keeps title & dark toggle) */
.header-row {
  width:100%;
}

/* ---------- SIDEBAR ---------- */
.sidebar {
  width:320px;
  flex-shrink:0;
}

/* Sidebar & Cards */
.card-box {
  background: var(--card-bg);
  border-radius: var(--radius);
  padding:16px;
  border:1px solid var(--border);
  box-shadow: var(--shadow);
  transition: transform .18s ease, box-shadow .18s ease;
}

body[data-theme="dark"] .card-box{
  background: #241a3d;
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 8px 30px rgba(0,0,0,0.45);
}

/* Brand */
.brand {
  font-weight:900;
  font-size:1.25rem;
  letter-spacing:-0.3px;
  background: linear-gradient(90deg,var(--usm-purple),var(--usm-purple-light));
  -webkit-background-clip: text;
  color: transparent !important;
}

/* Small muted */
.small-muted { color: var(--muted); font-size:.94rem; }

/* ---------- FORM (controls) ---------- */
.form-select, .form-control{
  border-radius:12px !important;
  padding:10px 12px !important;
  border:1px solid rgba(16,24,40,0.06) !important;
  background: #faf7ff;
}

body[data-theme="dark"] .form-select,
body[data-theme="dark"] .form-control{
  background: #32254e;
  color: #efe6ff;
  border:1px solid rgba(255,255,255,0.06) !important;
}

/* Focus state */
.form-control:focus, .form-select:focus{
  outline: none;
  box-shadow: 0 0 0 6px rgba(167,139,250,0.12);
  border-color: var(--usm-purple) !important;
}

/* ---------- BUTTONS ---------- */
.btn { border-radius:12px; font-weight:700; }
.btn-primary{
  background: linear-gradient(90deg,var(--usm-purple),var(--usm-purple-light));
  color: #fff;
  border: none;
}
.btn-outline-secondary{
  color: var(--usm-purple);
  border:1px solid var(--usm-purple);
}

/* ---------- TABS ---------- */
.nav-tabs { border-bottom: none; overflow-x:auto; white-space:nowrap; }
.nav-tabs .nav-link{
  border:0; margin-right:6px; border-radius:10px; padding:8px 12px;
  background:#f3eefe; color:var(--usm-purple);
}
.nav-tabs .nav-link.active{
  background:var(--usm-purple); color:#fff; font-weight:700;
}
body[data-theme="dark"] .nav-tabs .nav-link{ background:#39264f; color:#d9cfff; }
body[data-theme="dark"] .nav-tabs .nav-link.active{ background:#7c3aed; }

/* ---------- VARIANT ITEM ---------- */
.variant-item{
  background:#fbf7ff; border:1px solid rgba(109,40,217,0.08); padding:10px; border-radius:10px; cursor:pointer;
}
body[data-theme="dark"] .variant-item{ background:#2b234b; border-color:rgba(255,255,255,0.03); }

/* ---------- CONTENT SUGGESTIONS ---------- */
#content_suggestions button{ margin-right:6px; margin-bottom:6px; border-radius:10px; background:#f3eefe !important; color:var(--usm-purple); border:1px solid rgba(109,40,217,0.12) !important; }
body[data-theme="dark"] #content_suggestions button{ background:#3b2e5e !important; color:#e7ddff; border:1px solid rgba(255,255,255,0.04) !important; }

/* ---------- GENERATED CLO + DOWNLOAD AREA ---------- */
#cloCard { margin-top:12px; }
.download-row { margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; }

/* ---------- SMALL HELP TEXT ---------- */
.helper { font-size:.88rem; color:var(--muted); margin-top:6px; }

/* ---------- MOBILE (responsive) ---------- */
@media (max-width: 991px){
  .app-shell { flex-direction:column; padding:12px; }
  .sidebar { width:100%; order:1; }
  .app-main { order:2; }
  .nav-tabs { -webkit-overflow-scrolling: touch; padding-bottom:6px; }
}

/* smaller phones */
@media (max-width: 575px){
  .card-box{ padding:12px; border-radius:12px; }
  .brand{ font-size:1.05rem; }
  .nav-tabs .nav-link{ padding:6px 10px; font-size:.92rem; }
  .btn{ font-size:.88rem; padding:7px 10px; }
}
  </style>
</head>

<body data-theme="light">
  <!-- container -->
  <div class="container-fluid">
    <!-- app shell -->
    <div class="app-shell">

      <!-- Header (wide row) - title + dark toggle -->
      <div class="header-row w-100">
        <div class="card-box d-flex justify-content-between align-items-center">
          <div>
            <div class="brand">SCLOG — Smart Course Learning Outcome Generator</div>
            <div class="small-muted">Professional CLO builder with mapping logic</div>
          </div>
          <div>
            <!-- dark toggle placed top-right per your choice -->
            <button id="darkToggle" class="btn btn-outline-secondary btn-sm">
              <i class="bi bi-moon"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Sidebar and main will follow (PART 2) -->
      <!-- ===========================
           SIDEBAR — Mapping Section
      ============================ -->
      <aside class="sidebar">

        <!-- PROFILE + LEVEL -->
        <div class="card-box mb-3">

          <label class="form-label small-muted">Academic Profile (affects mapping)</label>
          <select id="profile" class="form-select mb-3">
            <option value="health">Medical & Health</option>
            <option value="sc" selected>Computer Science & IT</option>
            <option value="eng">Engineering & Technology</option>
            <option value="socs">Social Sciences</option>
            <option value="edu">Education</option>
            <option value="bus">Business & Management</option>
            <option value="arts">Arts & Humanities</option>
          </select>

          <label class="form-label small-muted">Level</label>
          <select id="level" class="form-select mb-2">
            <option>Diploma</option>
            <option selected>Degree</option>
            <option>Master</option>
            <option>PhD</option>
          </select>

        </div>

        <!-- IEG → PEO → WHY → PLO → Statements -->
        <div class="card-box">

          <!-- IEG -->
          <label class="form-label small-muted">IEG</label>
          <select id="ieg" class="form-select mb-3">
            <option value="">Select IEG</option>
          </select>

          <!-- PEO -->
          <label class="form-label small-muted">PEO</label>
          <select id="peo" class="form-select mb-2">
            <option value="">Select PEO</option>
          </select>

          <!-- WHY THIS IEG → PEO? -->
          <div class="mt-2 small-muted fw-bold">Why this IEG → PEO?</div>
          <div id="iep_logic"
               class="rounded p-2 mt-1"
               style="background:#f8f5ff; min-height:48px; font-size:.9rem;">
            —
          </div>

          <!-- PLO -->
          <label class="form-label small-muted mt-3">PLO</label>
          <select id="plo" class="form-select mb-2">
            <option value="">Select PLO</option>
          </select>

          <!-- Statements -->
          <div class="mt-3 small-muted">
            <div><strong>PEO:</strong> <span id="peo_statement">—</span></div>
            <div><strong>PLO:</strong> <span id="plo_statement">—</span></div>
            <div><strong>Indicator:</strong> <span id="plo_indicator">—</span></div>
          </div>
        </div>

      </aside>
      <!-- ===========================
           MAIN BUILDER
      ============================ -->
      <main class="app-main flex-grow-1">

        <!-- BUILDER CARD -->
        <div class="card-box mb-3">

          <!-- Tabs -->
          <ul class="nav nav-tabs" id="tabNav" role="tablist">
            <li class="nav-item"><button class="nav-link active" id="builder-tab" data-bs-toggle="tab" data-bs-target="#builder" type="button">Builder</button></li>
            <li class="nav-item"><button class="nav-link" id="variants-tab" data-bs-toggle="tab" data-bs-target="#variants" type="button">Variants</button></li>
            <li class="nav-item"><button class="nav-link" id="assessment-tab" data-bs-toggle="tab" data-bs-target="#assessment" type="button">Assessment</button></li>
            <li class="nav-item"><button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history" type="button">History</button></li>
          </ul>

          <div class="tab-content mt-3">

            <!-- =====================
                 BUILDER TAB (active)
            ====================== -->
            <div class="tab-pane fade show active" id="builder">

              <div class="row g-3">

                <!-- LEFT SIDE (inputs) -->
                <div class="col-lg-8">

                  <!-- BLOOM -->
                  <label class="form-label small-muted">Bloom</label>
                  <select id="bloom" class="form-select mb-2">
                    <option value="">Select Bloom</option>
                  </select>

                  <!-- VERB -->
                  <label class="form-label small-muted">Verb</label>
                  <select id="verb" class="form-select mb-2">
                    <option value="">Select Verb</option>
                  </select>

                  <!-- FIELD — moved into builder -->
                  <label class="form-label small-muted">Field (topic area)</label>
                  <select id="field" class="form-select mb-2">
                    <option value="">— Select Field —</option>
                    <option>Computer Science</option>
                    <option>Medical & Health</option>
                    <option>Engineering</option>
                    <option>Social Sciences</option>
                    <option>Education</option>
                    <option>Business</option>
                    <option>Arts & Humanities</option>
                  </select>
                  <div class="helper">Selecting a field suggests relevant content topics.</div>

                  <!-- CONTENT -->
                  <label class="form-label small-muted mt-2">Content (topic / object)</label>
                  <input id="content" class="form-control" placeholder="e.g., interpret ECG waveforms">

                  <!-- CONTENT SUGGESTIONS -->
                  <div id="content_suggestions" class="mt-2"></div>

                  <!-- GENERATE BUTTON -->
                  <div class="mt-3 d-flex gap-2 align-items-center">
                    <button id="generateBtn" class="btn btn-primary">
                      <i class="bi bi-magic me-1"></i> Generate CLO
                    </button>
                    <button id="copyBtn" class="btn btn-outline-secondary">
                      <i class="bi bi-clipboard"></i> Copy
                    </button>

                    <div id="busy" style="display:none;" class="small-muted">
                      <span class="loader"></span> Generating…
                    </div>
                  </div>

                  <!-- GENERATED CLO CARD -->
                  <div id="cloCard" class="card-box mt-3" style="display:none;">
                    <h6 class="mb-2">Generated CLO</h6>
                    <div id="clo_text" class="fw-semibold" style="line-height:1.4;"></div>

                    <!-- VARIANTS -->
                    <button id="toggleVariants" class="btn btn-sm btn-outline-secondary mt-3">
                      Show variants
                    </button>
                    <div id="variantsPanel" style="display:none;" class="mt-2"></div>

                    <!-- DOWNLOAD BUTTONS (Option A) -->
                    <div class="download-row mt-3">
                      <button id="downloadBtn" class="btn btn-success">
                        <i class="bi bi-download me-1"></i> Download CLO
                      </button>

                      <button id="downloadRubricBtn" class="btn btn-outline-secondary">
                        <i class="bi bi-file-earmark-text me-1"></i> Download Rubric
                      </button>
                    </div>
                  </div>

                </div>

                <!-- RIGHT SIDE (metadata) -->
                <div class="col-lg-4">

                  <!-- MAPPING METADATA -->
                  <div class="card-box">
                    <div class="small-muted mb-2">Mapping metadata</div>

                    <p><strong>SC Code:</strong><br><span id="sc_code" class="small-muted">—</span></p>
                    <p><strong>SC Description:</strong><br><span id="sc_desc" class="small-muted">—</span></p>
                    <p><strong>VBE:</strong><br><span id="vbe" class="small-muted">—</span></p>
                    <p><strong>Domain:</strong><br><span id="domain" class="small-muted">—</span></p>
                    <p><strong>Condition:</strong><br><span id="condition" class="small-muted">—</span></p>
                    <p><strong>Criterion:</strong><br><span id="criterion" class="small-muted">—</span></p>
                  </div>

                </div>

              </div>
            </div>

            <!-- VARIANTS TAB -->
            <div class="tab-pane fade" id="variants">
              <div id="variants_list"></div>
            </div>

            <!-- ASSESSMENT TAB -->
            <div class="tab-pane fade" id="assessment">
              <div class="row">
                <div class="col-lg-6">
                  <div class="card-box">
                    <h6>Assessment methods</h6>
                    <div id="assess_list" class="small-muted">—</div>
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="card-box">
                    <h6>Suggested evidence</h6>
                    <div id="evidence_list" class="small-muted">—</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- HISTORY TAB -->
            <div class="tab-pane fade" id="history">
              <div class="card-box">
                <h6>Recent generation</h6>
                <div id="history_list" class="small-muted">
                  No history in this demo.
                </div>
              </div>
            </div>

          </div><!-- tab content -->
        </div><!-- builder card -->

      </main>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* ==========================================
   ELEMENT REFERENCES
========================================== */
const $ = id => document.getElementById(id);

const profileSel = $('profile');
const levelSel = $('level');
const iegSel = $('ieg');
const peoSel = $('peo');
const ploSel = $('plo');

const bloomSel = $('bloom');
const verbSel = $('verb');
const fieldSel = $('field');
const contentInput = $('content');
const contentSuggestionsEl = $('content_suggestions');

const peoStatementEl = $('peo_statement');
const ploStatementEl = $('plo_statement');
const ploIndicatorEl = $('plo_indicator');
const logicBox = $('iep_logic');

const scCodeEl = $('sc_code');
const scDescEl = $('sc_desc');
const vbeEl = $('vbe');
const domainEl = $('domain');
const conditionEl = $('condition');
const criterionEl = $('criterion');

const cloCard = $('cloCard');
const cloText = $('clo_text');
const variantsPanel = $('variantsPanel');
const variantsList = $('variants_list');
const assessList = $('assess_list');
const evidenceList = $('evidence_list');

const generateBtn = $('generateBtn');
const copyBtn = $('copyBtn');
const toggleVariantsBtn = $('toggleVariants');
const downloadBtn = $('downloadBtn');
const downloadRubricBtn = $('downloadRubricBtn');
const busyEl = $('busy');

const darkToggle = $('darkToggle');

let LAST_CLO = null;


/* ==========================================
   DARK MODE TOGGLE
========================================== */
darkToggle.addEventListener('click', () => {
  const current = document.body.getAttribute("data-theme") || "light";
  const next = current === "light" ? "dark" : "light";
  document.body.setAttribute("data-theme", next);

  darkToggle.innerHTML =
    next === "dark"
      ? '<i class="bi bi-sun"></i>'
      : '<i class="bi bi-moon"></i>';
});


/* ==========================================
   LOAD MAPPING (IEG, PLO list)
========================================== */
async function loadMapping() {
  try {
    const res = await fetch('/api/mapping');
    const map = await res.json();
    window.MAP = map || {};

    // Populate IEGs
    iegSel.innerHTML = '<option value="">Select IEG</option>';
    (map.IEGs || []).forEach(i => iegSel.add(new Option(i, i)));

    // Populate PLO fallback
    ploSel.innerHTML = '<option value="">Select PLO</option>';
    (map.PLOs || []).forEach(p => ploSel.add(new Option(p, p)));
  } catch (err) {
    console.error("Mapping load error:", err);
  }
}


/* ==========================================
   IEG → PEO + LOGIC
========================================== */
iegSel.addEventListener('change', async () => {
  const ieg = iegSel.value;

  peoSel.innerHTML = '<option value="">Select PEO</option>';
  logicBox.innerText = '—';

  if (!ieg) return;

  try {
    // Load PEOs
    const res = await fetch(`/api/get_peos/${encodeURIComponent(ieg)}`);
    const peos = await res.json();

    peoSel.innerHTML = '<option value="">Select PEO</option>';
    peos.forEach(p => peoSel.add(new Option(p, p)));

    // Load WHY logic
    const logicRes = await fetch(`/api/logic/ieg_peo/${encodeURIComponent(ieg)}`);
    const logicText = await logicRes.text();
    logicBox.innerText =
      logicText.trim() ? logicText : "No logic explanation available.";

  } catch (err) {
    console.error(err);
    logicBox.innerText = "Logic unavailable.";
  }
});


/* ==========================================
   PEO → PLO + PEO Statement
========================================== */
peoSel.addEventListener('change', async () => {
  const peo = peoSel.value;

  ploSel.innerHTML = '<option value="">Select PLO</option>';
  peoStatementEl.textContent = '—';

  if (!peo) return;

  try {
    // Load PLOs
    const res = await fetch(`/api/get_plos/${encodeURIComponent(peo)}`);
    const plos = await res.json();

    ploSel.innerHTML = '<option value="">Select PLO</option>';
    plos.forEach(p => ploSel.add(new Option(p, p)));

    // Load PEO statement
    const level = levelSel.value || 'Degree';
    const stmtRes = await fetch(`/api/get_statement/${encodeURIComponent(level)}/PEO/${encodeURIComponent(peo)}`);
    const stmtText = await stmtRes.json();
    peoStatementEl.textContent = stmtText || '—';

  } catch (err) {
    console.error(err);
    ploSel.innerHTML = '<option value="">Error loading PLO</option>';
  }
});


/* ==========================================
   PLO SELECTED → Load Bloom list + Statement + Indicator
========================================== */
ploSel.addEventListener('change', async () => {
  const plo = ploSel.value;

  bloomSel.innerHTML = '<option>Loading…</option>';
  ploStatementEl.textContent = '—';
  ploIndicatorEl.textContent = '—';

  if (!plo) {
    bloomSel.innerHTML = '<option value="">Select Bloom</option>';
    return;
  }

  try {
    // Load Bloom levels
    const res = await fetch(`/api/get_blooms/${encodeURIComponent(plo)}?profile=${encodeURIComponent(profileSel.value)}`);
    const blooms = await res.json();

    bloomSel.innerHTML = '<option value="">Select Bloom</option>';
    blooms.forEach(b => bloomSel.add(new Option(b, b)));

    // Load PLO statement
    const level = levelSel.value || 'Degree';
    const stmtRes = await fetch(`/api/get_statement/${encodeURIComponent(level)}/PLO/${encodeURIComponent(plo)}`);
    const stmtText = await stmtRes.json();
    ploStatementEl.textContent = stmtText || '—';

    // Load indicator
    const map = window.MAP || {};
    ploIndicatorEl.textContent =
      (map.PLOIndicators && map.PLOIndicators[plo]) || '—';

  } catch (err) {
    bloomSel.innerHTML = '<option>Error</option>';
  }
});


/* ==========================================
   BLOOM SELECTED → VERBS + META
========================================== */
bloomSel.addEventListener('change', async () => {
  const bloom = bloomSel.value;
  const plo = ploSel.value;

  if (!bloom || !plo) return;

  try {
    // Verbs
    const vres = await fetch(
      `/api/get_verbs/${encodeURIComponent(plo)}/${encodeURIComponent(bloom)}?profile=${encodeURIComponent(profileSel.value)}`
    );
    const verbs = await vres.json();

    verbSel.innerHTML = '<option value="">Select Verb</option>';
    verbs.forEach(v => verbSel.add(new Option(v, v)));

  } catch (err) {
    verbSel.innerHTML = '<option value="">Error loading verbs</option>';
  }

  try {
    // Load meta
    const mres = await fetch(
      `/api/get_meta/${encodeURIComponent(plo)}/${encodeURIComponent(bloom)}?profile=${encodeURIComponent(profileSel.value)}`
    );
    const meta = await mres.json();

    scCodeEl.textContent = meta.sc_code || '—';
    scDescEl.textContent = meta.sc_desc || '—';
    vbeEl.textContent = meta.vbe || '—';
    domainEl.textContent = meta.domain || '—';
    conditionEl.textContent = meta.condition || '—';
    criterionEl.textContent = meta.criterion || '—';

  } catch (err) {
    console.error(err);
  }
});


/* ==========================================
   FIELD → CONTENT SUGGESTIONS
========================================== */
fieldSel.addEventListener('change', async () => {
  const field = fieldSel.value;

  contentSuggestionsEl.innerHTML = '';

  if (!field) return;

  try {
    const res = await fetch(`/api/content/${encodeURIComponent(field)}`);
    const list = await res.json();

    contentSuggestionsEl.innerHTML = '';
    (list || []).forEach(item => {
      const btn = document.createElement('button');
      btn.className = 'btn btn-sm';
      btn.textContent = item;
      btn.onclick = () => { contentInput.value = item; };
      contentSuggestionsEl.appendChild(btn);
    });

  } catch (err) {
    console.error(err);
  }
});


/* ==========================================
   GENERATE CLO
========================================== */
generateBtn.addEventListener('click', async () => {
  if (!ploSel.value || !bloomSel.value || !verbSel.value || !contentInput.value.trim()) {
    alert("Please complete Bloom, Verb, Content, and PLO mapping.");
    return;
  }

  busyEl.style.display = 'inline-block';
  generateBtn.disabled = true;

  const fd = new FormData();
  fd.append('profile', profileSel.value);
  fd.append('level', levelSel.value);
  fd.append('plo', ploSel.value);
  fd.append('bloom', bloomSel.value);
  fd.append('verb', verbSel.value);
  fd.append('content', contentInput.value);

  try {
    const res = await fetch('/generate', {
      method: 'POST',
      body: fd
    });

    const data = await res.json();
    LAST_CLO = data;

    cloText.innerText = data.clo || '';
    cloCard.style.display = 'block';

    /* variants */
    variantsPanel.innerHTML = '';
    const opts = data.clo_options || {};
    Object.entries(opts).forEach(([label, text]) => {
      const v = document.createElement('div');
      v.className = 'variant-item';
      v.innerHTML = `<strong>${label}</strong><div>${text}</div>`;
      v.onclick = () => { cloText.innerText = text; };
      variantsPanel.appendChild(v);
    });

    /* assessment */
    assessList.innerHTML = data.assessments?.length
      ? `<ul>${data.assessments.map(a => `<li>${a}</li>`).join('')}</ul>`
      : '—';

    /* evidence */
    evidenceList.innerHTML = Object.keys(data.evidence || {}).length
      ? Object.entries(data.evidence).map(([k,v]) => `<div><strong>${k}</strong>: ${v.join("; ")}</div>`).join("")
      : '—';

  } catch (err) {
    console.error(err);
    alert("Error generating CLO");
  } finally {
    busyEl.style.display = 'none';
    generateBtn.disabled = false;
  }
});


/* ==========================================
   VARIANTS TOGGLE
========================================== */
toggleVariantsBtn.addEventListener('click', () => {
  const hidden = variantsPanel.style.display === 'none' || variantsPanel.style.display === '';
  variantsPanel.style.display = hidden ? 'block' : 'none';
  toggleVariantsBtn.innerText = hidden ? 'Hide variants' : 'Show variants';
});


/* ==========================================
   COPY CLO
========================================== */
copyBtn.addEventListener('click', async () => {
  if (!cloText.innerText) return;
  try {
    await navigator.clipboard.writeText(cloText.innerText);
    copyBtn.innerText = "Copied!";
    setTimeout(() => {
      copyBtn.innerHTML = '<i class="bi bi-clipboard"></i> Copy';
    }, 1200);
  } catch (err) {
    alert("Copy failed");
  }
});


/* ==========================================
   DOWNLOAD BUTTONS
========================================== */
downloadBtn.addEventListener('click', () => {
  window.location = '/download';
});

downloadRubricBtn.addEventListener('click', () => {
  window.location = '/download_rubric';
});


/* ==========================================
   INIT
========================================== */
(function init() {
  loadMapping();
})();
</script>

</body>
</html>
